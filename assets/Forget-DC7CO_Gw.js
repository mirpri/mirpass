import{d as x,r as o,j as e,B as f,L as w,c as j}from"./index-BtQilkke.js";import{s as g}from"./crypto-Cw3CO9Ve.js";import{F as s,I as i}from"./index-Du-RPus6.js";import{C as y}from"./index-BTQ6B5bA.js";import{S as n}from"./TextArea-d1BLIjnm.js";import{T as b}from"./index-CNaZsIK2.js";import{R as k,a as v}from"./UserOutlined-bQhU1XY7.js";import{s as l}from"./index-xphwZMwG.js";const N=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],P=x("mail-check",N),{Title:c,Text:m}=b;function q(){const[d,a]=o.useState(!1),[u]=s.useForm(),[h,r]=o.useState(!1),p=async t=>{a(!0);try{await j.post("/profile/password/reset",{username:t.username,newPassword:await g(t.newPassword)}),r(!0),l.success("A verification email has been sent")}catch{r(!0),l.success("A verification email has been sent")}finally{a(!1)}};return e.jsx(y,{className:"w-full max-w-md shadow-lg rounded-xl",children:e.jsxs(n,{direction:"vertical",size:"large",className:"w-full",children:[h?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(P,{size:100,className:"m-auto"})}),e.jsx(c,{level:4,children:"Check your email"}),e.jsx(m,{className:"block",children:"We've sent a confirmation link to the email address associated with that username. Please check your inbox (and spam folder) to complete the reset process."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx(c,{level:3,children:"Forget Password"}),e.jsx(m,{type:"secondary",children:"Enter your username and new password."})]}),e.jsxs(s,{form:u,layout:"vertical",onFinish:p,requiredMark:!1,children:[e.jsx(s.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter your username"}],children:e.jsx(i,{prefix:e.jsx(k,{}),placeholder:"mirpass_user",size:"large"})}),e.jsx(s.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter a new password"},{min:8,message:"Password must be at least 8 characters"}],children:e.jsx(i.Password,{prefix:e.jsx(v,{}),placeholder:"New strong password",size:"large"})}),e.jsx(f,{type:"primary",htmlType:"submit",size:"large",block:!0,loading:d,style:{marginTop:"20px"},children:"Reset Password"})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(w,{to:"/login",className:"text-gray-500 hover:text-blue-500",children:e.jsx(n,{children:"Back to Login"})})})]})})}export{q as default};
