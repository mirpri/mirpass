import{r as d,I as x,a as j,u as w,j as r,S as u,B as y,L as b,d as v}from"./index-q3coxKpc.js";import{s as I}from"./crypto-B9Mf35RN.js";import{C as z}from"./index-C6EakQ48.js";import{T as R}from"./index-BnR03HeS.js";import{F as n,I as c}from"./index-BGxdU0Dl.js";import{R as M,a as p}from"./UserOutlined-BHQRD-uj.js";import{s as g}from"./index-C5Hs6obo.js";import"./TextArea-DBS6MHTP.js";var O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};function m(){return m=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(s[e]=o[e])}return s},m.apply(this,arguments)}const P=(s,a)=>d.createElement(x,m({},s,{ref:a,icon:O})),T=d.forwardRef(P),{Title:q,Text:h}=R;function _(){const[s,a]=d.useState(!1),o=j(),{t:e}=w(),f=async i=>{a(!0);try{const l={username:i.username,email:i.email,password:await I(i.password)},{data:t}=await v.post("/register",l);g.success(t?.message||e("reg.registration-successful-please-verify-your-email")),o("/login",{replace:!0})}catch(l){const t=l;g.error(t.response?.data?.error||e("reg.registration-failed"))}finally{a(!1)}};return r.jsx(z,{className:"max-w-md w-full shadow-2xl",children:r.jsxs(u,{orientation:"vertical",size:"large",className:"w-full",children:[r.jsxs(u,{orientation:"vertical",size:4,children:[r.jsx(q,{level:3,className:"m-0",children:e("reg.create-your-account")}),r.jsx(h,{type:"secondary",children:e("reg.fill-in-the-form-below-to-create-your-account")})]}),r.jsxs(n,{layout:"vertical",onFinish:f,requiredMark:!1,children:[r.jsx(n.Item,{label:e("username"),name:"username",rules:[{required:!0,message:e("reg.please-enter-a-username")},{min:5,message:e("reg.username-must-be-at-least-5-characters")},{max:15,message:e("reg.username-cannot-exceed-15-characters")},{pattern:/^[a-z0-9_]+$/,message:e("reg.can-only-contain-lowercase-letters-numbers-and-underscores")}],children:r.jsx(c,{size:"large",prefix:r.jsx(M,{}),placeholder:"johndoe"})}),r.jsx(n.Item,{label:e("email"),name:"email",rules:[{required:!0,message:e("reg.please-enter-a-valid-email"),type:"email"}],children:r.jsx(c,{size:"large",prefix:r.jsx(T,{}),placeholder:"name@example.com"})}),r.jsx(n.Item,{label:e("password"),name:"password",rules:[{required:!0,message:e("reg.please-enter-a-password")},{min:8,message:e("reg.password-must-be-at-least-8-characters")}],children:r.jsx(c.Password,{size:"large",prefix:r.jsx(p,{}),placeholder:"••••••••"})}),r.jsx(n.Item,{label:e("reg.confirm-password"),name:"confirm",dependencies:["password"],rules:[{required:!0,message:e("reg.please-confirm-your-password")},({getFieldValue:i})=>({validator(l,t){return!t||i("password")===t?Promise.resolve():Promise.reject(new Error(e("reg.passwords-do-not-match")))}})],children:r.jsx(c.Password,{size:"large",prefix:r.jsx(p,{}),placeholder:"••••••••"})}),r.jsx(n.Item,{children:r.jsx(y,{type:"primary",htmlType:"submit",size:"large",block:!0,loading:s,children:e("reg.create-account")})})]}),r.jsxs(h,{type:"secondary",children:[e("reg.already-have-an-account")," ",r.jsx(b,{to:"/login",children:e("sign-in")})]})]})})}export{_ as default};
