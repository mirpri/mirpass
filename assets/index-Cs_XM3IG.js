import{P,s as F,w as x,t as E,v as a,_ as M,C as v,x as w,r as h,y as R,z as G,D as I}from"./index-DZEDcsWI.js";let c=null,l=e=>e(),g=[],p={};function y(){const{getContainer:e,duration:n,rtl:r,maxCount:s,top:t}=p,o=e?.()||document.body;return{getContainer:()=>o,duration:n,rtl:r,maxCount:s,top:t}}const _=a.forwardRef((e,n)=>{const{messageConfig:r,sync:s}=e,{getPrefixCls:t}=h.useContext(R),o=p.prefixCls||t("message"),f=h.useContext(G),[u,d]=I({...r,prefixCls:o,...f.message});return a.useImperativeHandle(n,()=>{const i={...u};return Object.keys(i).forEach(m=>{i[m]=(...b)=>(s(),u[m].apply(u,b))}),{instance:i,sync:s}}),d}),k=a.forwardRef((e,n)=>{const[r,s]=a.useState(y),t=()=>{s(y)};a.useEffect(t,[]);const o=w(),f=o.getRootPrefixCls(),u=o.getIconPrefixCls(),d=o.getTheme(),i=a.createElement(_,{ref:n,sync:t,messageConfig:r});return a.createElement(v,{prefixCls:f,iconPrefixCls:u,theme:d},o.holderRender?o.holderRender(i):i)}),C=()=>{if(!c){const e=document.createDocumentFragment(),n={fragment:e};c=n,l(()=>{E(a.createElement(k,{ref:r=>{const{instance:s,sync:t}=r||{};Promise.resolve().then(()=>{!n.instance&&s&&(n.instance=s,n.sync=t,C())})}}),e)});return}c.instance&&(g.forEach(e=>{const{type:n,skipped:r}=e;if(!r)switch(n){case"open":{l(()=>{const s=c.instance.open({...p,...e.config});s?.then(e.resolve),e.setCloseFn(s)});break}case"destroy":l(()=>{c?.instance.destroy(e.key)});break;default:l(()=>{var s;const t=(s=c.instance)[n].apply(s,M(e.args));t?.then(e.resolve),e.setCloseFn(t)})}}),g=[])};function D(e){p={...p,...e},l(()=>{c?.sync?.()})}function H(e){const n=x(r=>{let s;const t={type:"open",config:e,resolve:r,setCloseFn:o=>{s=o}};return g.push(t),()=>{s?l(()=>{s()}):t.skipped=!0}});return C(),n}function O(e,n){const r=x(s=>{let t;const o={type:e,args:n,resolve:s,setCloseFn:f=>{t=f}};return g.push(o),()=>{t?l(()=>{t()}):o.skipped=!0}});return C(),r}const A=e=>{g.push({type:"destroy",key:e}),C()},Q=["success","info","warning","error","loading"],S={open:H,destroy:A,config:D,useMessage:F,_InternalPanelDoNotUseOrYouWillBeFired:P},W=S;Q.forEach(e=>{W[e]=(...n)=>O(e,n)});export{W as s};
