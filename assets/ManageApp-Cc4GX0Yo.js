import{g as ve,z as Te,f as Ee,r as n,h as je,v as Xe,i as be,k as N,p as xe,D as qe,E as Je,l as Ce,n as Ze,F as Qe,R as et,x as tt,_ as Ie,G as st,H as nt,J as at,K as ot,M as rt,C as Ae,N as lt,O as it,P as $e,B as T,Q as ct,S as dt,T as mt,U as ut,V as pt,W as xt,t as gt,m as ft,X as ht,Y as yt,Z as vt,e as Re,I as Ue,$ as jt,u as bt,c as $,s as w,j as e,w as Ct,d as Nt,b as wt,y as pe}from"./index-BgHobQkF.js";import{F as St,I as It}from"./FailedView-Cbrf4yx4.js";import{d as ge,f as Ne,t as $t,F as we,D as kt,M as fe,S as ae,U as Tt,R as Et,a as le}from"./date-C1JcaJut.js";import{C as re,T as At,R as Rt}from"./index-BELaRMtZ.js";import{S as q}from"./TextArea-DDzZaqeS.js";import{T as Ut}from"./index-CpYTIEz2.js";import{T as Pe}from"./index-BEE0ckOr.js";import{R as Pt}from"./ArrowLeftOutlined-CIIZYGpE.js";import{R as ke,C as X,F as R,I as L}from"./index-BoaVPCjC.js";import{D as Mt}from"./index-CQoQ_nUP.js";import"./index-CffZ0V7V.js";const oe=(s,t,a,r,d)=>({background:s,border:`${Ee(r.lineWidth)} ${r.lineType} ${t}`,[`${d}-icon`]:{color:a}}),zt=s=>{const{componentCls:t,motionDurationSlow:a,marginXS:r,marginSM:d,fontSize:m,fontSizeLG:c,lineHeight:l,borderRadiusLG:i,motionEaseInOutCirc:u,withDescriptionIconSize:g,colorText:p,colorTextHeading:o,withDescriptionPadding:x,defaultPadding:h}=s;return{[t]:{...Te(s),position:"relative",display:"flex",alignItems:"center",padding:h,wordWrap:"break-word",borderRadius:i,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-section`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:m,lineHeight:l},"&-title":{color:o},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${u}, opacity ${a} ${u},
        padding-top ${a} ${u}, padding-bottom ${a} ${u},
        margin-bottom ${a} ${u}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}},[`${t}-with-description`]:{alignItems:"flex-start",padding:x,[`${t}-icon`]:{marginInlineEnd:d,fontSize:g,lineHeight:0},[`${t}-title`]:{display:"block",marginBottom:r,color:o,fontSize:c},[`${t}-description`]:{display:"block",color:p}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Ot=s=>{const{componentCls:t,colorSuccess:a,colorSuccessBorder:r,colorSuccessBg:d,colorWarning:m,colorWarningBorder:c,colorWarningBg:l,colorError:i,colorErrorBorder:u,colorErrorBg:g,colorInfo:p,colorInfoBorder:o,colorInfoBg:x}=s;return{[t]:{"&-success":oe(d,r,a,s,t),"&-info":oe(x,o,p,s,t),"&-warning":oe(l,c,m,s,t),"&-error":{...oe(g,u,i,s,t),[`${t}-description > pre`]:{margin:0,padding:0}}}}},Dt=s=>{const{componentCls:t,iconCls:a,motionDurationMid:r,marginXS:d,fontSizeIcon:m,colorIcon:c,colorIconHover:l}=s;return{[t]:{"&-actions":{marginInlineStart:d},[`${t}-close-icon`]:{marginInlineStart:d,padding:0,overflow:"hidden",fontSize:m,lineHeight:Ee(m),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:c,transition:`color ${r}`,"&:hover":{color:l}}},"&-close-text":{color:c,transition:`color ${r}`,"&:hover":{color:l}}}}},_t=s=>({withDescriptionIconSize:s.fontSizeHeading3,defaultPadding:`${s.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${s.paddingMD}px ${s.paddingContentHorizontalLG}px`}),Lt=ve("Alert",s=>[zt(s),Ot(s),Dt(s)],_t),Bt=s=>{const{icon:t,type:a,className:r,style:d,successIcon:m,infoIcon:c,warningIcon:l,errorIcon:i}=s,u={success:m??n.createElement(et,null),info:c??n.createElement(Qe,null),error:i??n.createElement(Ze,null),warning:l??n.createElement(Ce,null)};return n.createElement("span",{className:r,style:d},t??u[a])},Ft=s=>{const{isClosable:t,prefixCls:a,closeIcon:r,handleClose:d,ariaProps:m,className:c,style:l}=s,i=r===!0||r===void 0?n.createElement(tt,null):r;return t?n.createElement("button",{type:"button",onClick:d,className:N(`${a}-close-icon`,c),tabIndex:0,style:l,...m},i):null},Me=n.forwardRef((s,t)=>{const{description:a,prefixCls:r,message:d,title:m,banner:c,className:l,rootClassName:i,style:u,onMouseEnter:g,onMouseLeave:p,onClick:o,afterClose:x,showIcon:h,closable:f,closeText:b,closeIcon:y,action:v,id:j,styles:U,classNames:J,...Z}=s,V=m??d,[W,G]=n.useState(!1),D=n.useRef(null);n.useImperativeHandle(t,()=>({nativeElement:D.current}));const{getPrefixCls:Q,direction:I,closable:E,closeIcon:Y,className:B,style:M,classNames:k,styles:O,successIcon:ee,infoIcon:A,warningIcon:te,errorIcon:ie}=je("alert"),C=Q("alert",r),[ce,ne]=Lt(C),{onClose:de,afterClose:Le}=f&&typeof f=="object"?f:{},Be=_=>{G(!0),(de??s.onClose)?.(_)},me=n.useMemo(()=>s.type!==void 0?s.type:c?"warning":"info",[s.type,c]),Se=n.useMemo(()=>typeof f=="object"&&f.closeIcon||b?!0:typeof f=="boolean"?f:y!==!1&&Xe(y)?!0:!!E,[b,y,f,E]),ue=c&&h===void 0?!0:h,Fe={...s,prefixCls:C,type:me,showIcon:ue,closable:Se},[F,H]=be([k,J],[O,U],{props:Fe}),He=N(C,`${C}-${me}`,{[`${C}-with-description`]:!!a,[`${C}-no-icon`]:!ue,[`${C}-banner`]:!!c,[`${C}-rtl`]:I==="rtl"},B,l,i,F.root,ne,ce),Ke=xe(Z,{aria:!0,data:!0}),Ve=n.useMemo(()=>typeof f=="object"&&f.closeIcon?f.closeIcon:b||(y!==void 0?y:typeof E=="object"&&E.closeIcon?E.closeIcon:Y),[y,f,E,b,Y]),We=n.useMemo(()=>{const _=f??E;return typeof _=="object"?xe(_,{data:!0,aria:!0}):{}},[f,E]);return n.createElement(qe,{visible:!W,motionName:`${C}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:_=>({maxHeight:_.offsetHeight}),onLeaveEnd:Le??x},({className:_,style:Ge},Ye)=>n.createElement("div",{id:j,ref:Je(D,Ye),"data-show":!W,className:N(He,_),style:{...H.root,...M,...u,...Ge},onMouseEnter:g,onMouseLeave:p,onClick:o,role:"alert",...Ke},ue?n.createElement(Bt,{className:N(`${C}-icon`,F.icon),style:H.icon,description:a,icon:s.icon,prefixCls:C,type:me,successIcon:ee,infoIcon:A,warningIcon:te,errorIcon:ie}):null,n.createElement("div",{className:N(`${C}-section`,F.section),style:H.section},V?n.createElement("div",{className:N(`${C}-title`,F.title),style:H.title},V):null,a?n.createElement("div",{className:N(`${C}-description`,F.description),style:H.description},a):null),v?n.createElement("div",{className:N(`${C}-actions`,F.actions),style:H.actions},v):null,n.createElement(Ft,{className:F.close,style:H.close,isClosable:Se,prefixCls:C,closeIcon:Ve,handleClose:Be,ariaProps:We})))});function Ht(s,t,a){return t=Ie(t),st(s,nt()?Reflect.construct(t,a||[],Ie(s).constructor):t.apply(s,a))}let Kt=(function(s){function t(){var a;return rt(this,t),a=Ht(this,t,arguments),a.state={error:void 0,info:{componentStack:""}},a}return at(t,s),ot(t,[{key:"componentDidCatch",value:function(r,d){this.setState({error:r,info:d})}},{key:"render",value:function(){const{message:r,title:d,description:m,id:c,children:l}=this.props,{error:i,info:u}=this.state,g=d??r,p=u?.componentStack||null,o=typeof g>"u"?(i||"").toString():g,x=typeof m>"u"?p:m;return i?n.createElement(Me,{id:c,type:"error",title:o,description:n.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},x)}):l}}])})(n.Component);const ze=Me;ze.ErrorBoundary=Kt;const Vt=s=>{const{componentCls:t,iconCls:a,antCls:r,zIndexPopup:d,colorText:m,colorWarning:c,marginXXS:l,marginXS:i,fontSize:u,fontWeightStrong:g,colorTextHeading:p}=s;return{[t]:{zIndex:d,[`&${r}-popover`]:{fontSize:u},[`${t}-message`]:{marginBottom:i,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${a}`]:{color:c,fontSize:u,lineHeight:1,marginInlineEnd:i},[`${t}-title`]:{fontWeight:g,color:p,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:l,color:m}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:i}}}}},Wt=s=>{const{zIndexPopupBase:t}=s;return{zIndexPopup:t+60}},Oe=ve("Popconfirm",s=>Vt(s),Wt,{resetStyle:!1}),De=s=>{const{prefixCls:t,okButtonProps:a,cancelButtonProps:r,title:d,description:m,cancelText:c,okText:l,okType:i="primary",icon:u=n.createElement(Ce,null),showCancel:g=!0,close:p,onConfirm:o,onCancel:x,onPopupClick:h,classNames:f,styles:b}=s,{getPrefixCls:y}=n.useContext(Ae),[v]=lt("Popconfirm",it.Popconfirm),j=$e(d),U=$e(m);return n.createElement("div",{className:`${t}-inner-content`,onClick:h},n.createElement("div",{className:`${t}-message`},u&&n.createElement("span",{className:`${t}-message-icon`},u),n.createElement("div",{className:`${t}-message-text`},j&&n.createElement("div",{className:N(`${t}-title`,f?.title),style:b?.title},j),U&&n.createElement("div",{className:N(`${t}-description`,f?.content),style:b?.content},U))),n.createElement("div",{className:`${t}-buttons`},g&&n.createElement(T,{onClick:x,size:"small",...r},c||v?.cancelText),n.createElement(ct,{buttonProps:{size:"small",...dt(i),...a},actionFn:o,close:p,prefixCls:y("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},l||v?.okText)))},Gt=s=>{const{prefixCls:t,placement:a,className:r,style:d,...m}=s,{getPrefixCls:c}=n.useContext(Ae),l=c("popconfirm",t);return Oe(l),n.createElement(mt,{placement:a,className:N(l,r),style:d,content:n.createElement(De,{prefixCls:l,...m})})},Yt=n.forwardRef((s,t)=>{const{prefixCls:a,placement:r="top",trigger:d,okType:m="primary",icon:c=n.createElement(Ce,null),children:l,overlayClassName:i,onOpenChange:u,overlayStyle:g,styles:p,arrow:o,classNames:x,...h}=s,{getPrefixCls:f,className:b,style:y,classNames:v,styles:j,arrow:U,trigger:J}=je("popconfirm"),[Z,V]=ut(s.defaultOpen??!1,s.open),W=pt(o,U),G=d||J||"click",D=A=>{V(A),u?.(A)},Q=()=>{D(!1)},I=A=>s.onConfirm?.call(void 0,A),E=A=>{D(!1),s.onCancel?.call(void 0,A)},Y=A=>{const{disabled:te=!1}=s;te||D(A)},B=f("popconfirm",a),M={...s,placement:r,trigger:G,okType:m,overlayStyle:g,styles:p,classNames:x},[k,O]=be([v,x],[j,p],{props:M}),ee=N(B,b,i,k.root);return Oe(B),n.createElement(xt,{arrow:W,...gt(h,["title"]),trigger:G,placement:r,onOpenChange:Y,open:Z,ref:t,classNames:{root:ee,container:k.container,arrow:k.arrow},styles:{root:{...y,...O.root,...g},container:O.container,arrow:O.arrow},content:n.createElement(De,{okType:m,icon:c,...s,prefixCls:B,close:Q,onConfirm:I,onCancel:E,classNames:k,styles:O}),"data-popover-inject":!0},l)}),se=Yt;se._InternalPanelDoNotUseOrYouWillBeFired=Gt;const Xt=s=>{const{value:t,formatter:a,precision:r,decimalSeparator:d,groupSeparator:m="",prefixCls:c}=s;let l;if(typeof a=="function")l=a(t);else{const i=String(t),u=i.match(/^(-?)(\d*)(\.(\d+))?$/);if(!u||i==="-")l=i;else{const g=u[1];let p=u[2]||"0",o=u[4]||"";p=p.replace(/\B(?=(\d{3})+(?!\d))/g,m),typeof r=="number"&&(o=o.padEnd(r,"0").slice(0,r>0?r:0)),o&&(o=`${d}${o}`),l=[n.createElement("span",{key:"int",className:`${c}-content-value-int`},g,p),o&&n.createElement("span",{key:"decimal",className:`${c}-content-value-decimal`},o)]}}return n.createElement("span",{className:`${c}-content-value`},l)},qt=s=>{const{componentCls:t,marginXXS:a,padding:r,colorTextDescription:d,titleFontSize:m,colorTextHeading:c,contentFontSize:l,fontFamily:i}=s;return{[t]:{...Te(s),[`${t}-header`]:{paddingBottom:a,[`${t}-title`]:{color:d,fontSize:m}},[`${t}-skeleton`]:{paddingTop:r},[`${t}-content`]:{color:c,fontSize:l,fontFamily:i,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:a},[`${t}-content-suffix`]:{marginInlineStart:a}}}}},Jt=s=>{const{fontSizeHeading3:t,fontSize:a}=s;return{titleFontSize:a,contentFontSize:t}},Zt=ve("Statistic",s=>{const t=ft(s,{});return qt(t)},Jt),K=n.forwardRef((s,t)=>{const{prefixCls:a,className:r,rootClassName:d,style:m,valueStyle:c,value:l=0,title:i,valueRender:u,prefix:g,suffix:p,loading:o=!1,formatter:x,precision:h,decimalSeparator:f=".",groupSeparator:b=",",onMouseEnter:y,onMouseLeave:v,styles:j,classNames:U,...J}=s,{getPrefixCls:Z,direction:V,className:W,style:G,classNames:D,styles:Q}=je("statistic"),I=Z("statistic",a),[E,Y]=Zt(I),B={...s,decimalSeparator:f,groupSeparator:b,loading:o,value:l},[M,k]=be([D,U],[Q,j],{props:B}),O=n.createElement(Xt,{decimalSeparator:f,groupSeparator:b,prefixCls:I,formatter:x,precision:h,value:l}),ee=N(I,{[`${I}-rtl`]:V==="rtl"},W,r,d,M.root,E,Y),A=N(`${I}-header`,M.header),te=N(`${I}-title`,M.title),ie=N(`${I}-content`,M.content),C=N(`${I}-content-prefix`,M.prefix),ce=N(`${I}-content-suffix`,M.suffix),ne=n.useRef(null);n.useImperativeHandle(t,()=>({nativeElement:ne.current}));const de=xe(J,{aria:!0,data:!0});return n.createElement("div",{...de,className:ee,style:{...k.root,...G,...m},ref:ne,onMouseEnter:y,onMouseLeave:v},i&&n.createElement("div",{className:A,style:k.header},n.createElement("div",{className:te,style:k.title},i)),n.createElement(ht,{paragraph:!1,loading:o,className:`${I}-skeleton`,active:!0},n.createElement("div",{className:ie,style:{...c,...k.content}},g&&n.createElement("span",{className:C,style:k.prefix},g),u?u(O):O,p&&n.createElement("span",{className:ce,style:k.suffix},p))))}),Qt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function es(s,t){let a=s;const r=/\[[^\]]*]/g,d=(t.match(r)||[]).map(i=>i.slice(1,-1)),m=t.replace(r,"[]"),c=Qt.reduce((i,[u,g])=>{if(i.includes(u)){const p=Math.floor(a/g);return a-=p*g,i.replace(new RegExp(`${u}+`,"g"),o=>{const x=o.length;return p.toString().padStart(x,"0")})}return i},m);let l=0;return c.replace(r,()=>{const i=d[l];return l+=1,i})}function ts(s,t,a){const{format:r=""}=t,d=new Date(s).getTime(),m=Date.now(),c=Math.max(a?d-m:m-d,0);return es(c,r)}const ss=1e3/60;function ns(s){return new Date(s).getTime()}const _e=s=>{const{value:t,format:a="HH:mm:ss",onChange:r,onFinish:d,type:m,...c}=s,l=m==="countdown",[i,u]=n.useState(null),g=yt(()=>{const x=Date.now(),h=ns(t);u({});const f=l?h-x:x-h;return r?.(f),l&&h<x?(d?.(),!1):!0});n.useEffect(()=>{let x;const h=()=>{g()||window.clearInterval(x)},f=()=>{x=window.setInterval(h,ss)},b=()=>{window.clearInterval(x)};return f(),()=>{b()}},[t,l]),n.useEffect(()=>{u({})},[]);const p=(x,h)=>i?ts(x,{...h,format:a},l):"-",o=x=>vt(x,{title:void 0});return n.createElement(K,{...c,value:t,valueRender:o,formatter:p})},as=s=>n.createElement(_e,{...s,type:"countdown"}),os=n.memo(as);K.Timer=_e;K.Countdown=os;const rs=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ls=Re("ban",rs);const is=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cs=Re("copy",is);var ds={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function he(){return he=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},he.apply(this,arguments)}const ms=(s,t)=>n.createElement(Ue,he({},s,{ref:t,icon:ds})),us=n.forwardRef(ms);var ps={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};function ye(){return ye=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},ye.apply(this,arguments)}const xs=(s,t)=>n.createElement(Ue,ye({},s,{ref:t,icon:ps})),gs=n.forwardRef(xs),{Title:z,Text:P,Paragraph:S}=Ut;function Rs(){const{appId:s}=jt(),t=bt(),[a,r]=n.useState(null),[d,m]=n.useState(!1);n.useEffect(()=>{s&&c()},[s]);const c=async()=>{m(!0);try{const{data:i}=await $.get(`/apps/details?id=${s}`);r(i.data)}catch{w.error("Could not load app details"),t("/dashboard")}finally{m(!1)}};if(d)return e.jsx(Ct,{});if(!a)return e.jsx(St,{});const l=[{key:"stats",label:"Analytics",children:e.jsx(js,{app:a})},{key:"keys",label:"API Keys",children:e.jsx(fs,{app:a})},{key:"members",label:"Members",children:e.jsx(hs,{app:a})},{key:"help",label:"Integration Guide",children:e.jsx(vs,{app:a})},{key:"settings",label:"Settings",children:e.jsx(ys,{app:a,onUpdate:c,onDelete:()=>t("/dashboard")})}];return e.jsxs(re,{className:"max-w-5xl w-full shadow-xl",title:"Manage Application",extra:e.jsx(T,{icon:e.jsx(Pt,{}),onClick:()=>t(-1),children:"Back"}),children:[e.jsxs(q,{size:10,align:"center",className:"mb-3",children:[e.jsx(Nt,{size:48,src:a.logoUrl,children:a.name.charAt(0).toUpperCase()}),e.jsx(z,{level:3,style:{marginBottom:0},children:a.name}),e.jsx(Pe,{color:"blue",children:a.role})]}),a.suspendUntil&&ge(a.suspendUntil).isAfter(ge())&&e.jsx(ze,{type:"error",title:"This app is suspended until "+Ne(a.suspendUntil)}),e.jsx(At,{defaultActiveKey:"stats",items:l})]})}function fs({app:s}){const[t,a]=n.useState([]),[r,d]=n.useState(!1),[m,c]=n.useState(!1),[l,i]=n.useState(""),[u,g]=n.useState(!1),[p,o]=n.useState("");n.useEffect(()=>{x()},[s.id]);const x=async()=>{d(!0);try{const{data:y}=await $.get(`/apps/keys?id=${s.id}`);a(y.data||[])}catch{}finally{d(!1)}},h=async()=>{try{const{data:y}=await $.post("/apps/keys/create",{appId:s.id,name:l});o(y.data.key),c(!1),g(!0),i(""),x()}catch{w.error("Failed to create API key")}},f=async y=>{try{await $.post("/apps/keys/delete",{appId:s.id,keyId:y}),w.success("Key deleted"),x()}catch{w.error("Could not delete key")}},b=[{title:"Name",dataIndex:"name",key:"name",render:y=>y||e.jsx(P,{type:"secondary",children:"Unnamed"})},{title:"ID",dataIndex:"id",key:"id"},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:y=>Ne(y)},{title:"Action",key:"action",render:(y,v)=>e.jsx(se,{title:"Delete this key?",onConfirm:()=>f(v.id),okText:"Yes",cancelText:"No",children:e.jsx(T,{danger:!0,size:"small",icon:e.jsx(le,{}),children:"Delete"})})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(P,{children:"Manage your API keys for accessing the service."}),s.role!=="external"&&e.jsx(T,{type:"primary",icon:e.jsx(Rt,{}),onClick:()=>c(!0),children:"Create New Key"})]}),e.jsx(we,{dataSource:t,columns:b,rowKey:"id",loading:r,pagination:!1}),e.jsx(fe,{title:"Create New API Key",open:m,onCancel:()=>c(!1),onOk:h,okText:"Create",children:e.jsx(R,{layout:"vertical",children:e.jsx(R.Item,{label:"Key Name (Optional)",children:e.jsx(L,{placeholder:"e.g. Production Key",value:l,onChange:y=>i(y.target.value)})})})}),e.jsx(fe,{title:"API Key Created",open:u,onCancel:()=>g(!1),footer:[e.jsx(T,{type:"primary",onClick:()=>g(!1),children:"Done"},"close")],children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(P,{type:"secondary",children:"Copy this key now. You won't see it again."}),e.jsxs(q.Compact,{style:{width:"100%"},children:[e.jsx(L,{value:p,readOnly:!0}),e.jsx(T,{onClick:()=>{navigator.clipboard.writeText(p),w.success("Copied to clipboard")},children:e.jsx(cs,{size:16})})]})]})})]})}function hs({app:s}){const[t,a]=n.useState([]),[r,d]=n.useState(!1),[m,c]=n.useState(!1),[l,i]=n.useState(""),[u,g]=n.useState("admin"),{profile:p}=wt();n.useEffect(()=>{o()},[s.id]);const o=async()=>{d(!0);try{const{data:v}=await $.get(`/apps/members?id=${s.id}`);a(v.data||[])}catch{}finally{d(!1)}},x=async()=>{try{await $.post("/apps/members/add",{appId:s.id,username:l,role:u}),w.success("Member added"),c(!1),i(""),o()}catch(v){const j=v.response?.data?.message||"Failed to add member";w.error(j)}},h=async v=>{try{await $.post("/apps/members/remove",{appId:s.id,username:v}),w.success("Member removed"),o()}catch{w.error("Failed to remove member")}},f=async(v,j)=>{try{await $.post("/apps/members/role",{appId:s.id,username:v,role:j}),w.success("Role updated"),o()}catch{w.error("Failed to update role")}},b=[{label:"Admin",value:"admin"},{label:"Root",value:"root"}],y=[{title:"Username",dataIndex:"username",key:"username"},{title:"Role",dataIndex:"role",key:"role",render:v=>e.jsx(Pe,{color:v==="root"?"gold":"blue",children:v})},{title:"Action",key:"action",render:(v,j)=>j.username===p?.username?e.jsx(q,{children:e.jsx(se,{title:"Remove yourself? You'll lose access to this app!",onConfirm:()=>h(j.username),okText:"Yes",cancelText:"No",children:e.jsx(T,{danger:!0,size:"small",icon:e.jsx(le,{}),children:"Leave"})})}):s.role!=="root"?e.jsx(ls,{size:18}):e.jsxs(q,{children:[e.jsx(ae,{value:j.role,onChange:U=>f(j.username,U),options:b,size:"small",className:"w-20"}),e.jsx(se,{title:`Remove ${j.username} from this app?`,onConfirm:()=>h(j.username),okText:"Yes",cancelText:"No",children:e.jsx(T,{danger:!0,size:"small",icon:e.jsx(le,{})})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(P,{children:"Manage team members and their access levels."}),s.role==="root"&&e.jsx(T,{type:"primary",icon:e.jsx(gs,{}),onClick:()=>c(!0),children:"Add Member"})]}),e.jsx(we,{dataSource:t,columns:y,rowKey:"username",loading:r,pagination:!1}),e.jsx(fe,{title:"Add New Member",open:m,onCancel:()=>c(!1),onOk:x,okText:"Add",children:e.jsxs(R,{layout:"vertical",children:[e.jsx(R.Item,{label:"Username",required:!0,children:e.jsx(L,{value:l,onChange:v=>i(v.target.value),placeholder:"Username"})}),e.jsx(R.Item,{label:"Role",required:!0,children:e.jsxs(ae,{value:u,onChange:g,children:[e.jsx(ae.Option,{value:"admin",children:"Admin"}),e.jsx(ae.Option,{value:"root",children:"Root"})]})})]})})]})}function ys({app:s,onUpdate:t,onDelete:a}){const[r]=R.useForm(),[d,m]=n.useState(!1),[c,l]=n.useState(null);n.useEffect(()=>{r.setFieldsValue({name:s.name,description:s.description,logoUrl:s.logoUrl}),l(null)},[s]);const i=async p=>{m(!0);try{if(c){const o=new FormData;o.append("appId",s.id),o.append("name",p.name),o.append("description",p.description||""),o.append("logoUrl",p.logoUrl||""),o.append("file",c),await $.post("/apps/update",o,{headers:{"Content-Type":"multipart/form-data"}})}else await $.post("/apps/update",{appId:s.id,name:p.name,description:p.description,logoUrl:p.logoUrl});w.success("App updated"),t(),l(null)}catch(o){console.error(o),w.error("Failed to update app")}finally{m(!1)}},u=async()=>{try{await $.post("/apps/delete",{appId:s.id}),w.success("App deleted"),a()}catch(p){const o=p.response?.data?.message||"Failed to delete app";w.error(o)}},g=s.role==="root";return e.jsxs("div",{className:"max-w-3xl",children:[e.jsx(z,{level:4,children:"General Settings"}),e.jsxs(R,{form:r,layout:"vertical",onFinish:i,children:[e.jsx(R.Item,{label:"App Name",name:"name",rules:[{required:!0,message:"Please input app name!"}],children:e.jsx(L,{})}),e.jsx(R.Item,{label:"Description",name:"description",children:e.jsx(L.TextArea,{rows:4})}),e.jsx(R.Item,{label:"Logo URL",children:e.jsxs(q.Compact,{style:{width:"100%"},children:[e.jsx(R.Item,{name:"logoUrl",noStyle:!0,children:e.jsx(L,{placeholder:"https://example.com/logo.png"})}),e.jsx(It,{rotationSlider:!0,children:e.jsx(Tt,{showUploadList:!1,customRequest:({file:p,onSuccess:o})=>{const x=p;l(x);const h=URL.createObjectURL(x);r.setFieldValue("logoUrl",h),w.success("Logo selected. Click Save to apply."),o?.("ok")},children:e.jsx(T,{icon:e.jsx(Et,{}),children:"Select"})})})]})}),e.jsx(R.Item,{children:e.jsx(T,{type:"primary",htmlType:"submit",icon:e.jsx(us,{}),loading:d,children:"Save Changes"})})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(Mt,{}),e.jsxs("div",{className:"border border-red-200 dark:border-red-900 p-4 rounded-lg bg-red-50 dark:bg-red-900/20",children:[e.jsx(z,{level:5,type:"danger",children:"Danger Zone"}),e.jsx(S,{children:"Deleting this application will remove all associated data, including API keys and member associations. This action cannot be undone."}),e.jsx(se,{title:"Are you sure you want to delete this app?",description:"This action cannot be undone.",onConfirm:u,okText:"Yes, delete it",okType:"danger",cancelText:"Cancel",children:e.jsx(T,{type:"primary",danger:!0,icon:e.jsx(le,{}),children:"Delete Application"})})]})]})]})}function vs({app:s}){const t=pe.API_URL,a=window.location.origin,[r,d]=n.useState(""),[m,c]=n.useState(""),l=async()=>{try{const{data:i}=await $.post("/sso/init",{appId:s.id},{headers:{"X-Api-Key":m}}),u=i.data.loginUrl+(r?`&from=${encodeURIComponent(r)}`:"");w.success("Test session created"),window.open(u,"_blank")}catch(i){const u=i,g=u.response?.status,p=u.response?.data?.message;return console.error("Failed to create test session",u),w.error(p+` (Status: ${g})`),null}};return e.jsxs("div",{className:"max-w-3xl space-y-8",children:[e.jsxs("div",{children:[e.jsx(z,{level:3,children:"Mirpass SSO Integration Guide"}),e.jsx(S,{children:"Integrate secure Single Sign-On (SSO) into your application using Mirpass. Initiate login sessions with your App ID."}),e.jsxs(q,{orientation:"vertical",className:"w-full max-w-xl",children:[e.jsx(L,{placeholder:"API Key",value:m,onChange:i=>c(i.target.value)}),e.jsx(L,{placeholder:"Redirect URL (Optional)",value:r,onChange:i=>d(i.target.value)}),e.jsx(T,{onClick:l,type:"primary",disabled:!m,children:"Create test session"})]})]}),e.jsxs("div",{children:[e.jsx(z,{level:4,children:"1. Initiate Login Session"}),e.jsx(S,{children:'When a user clicks "Login with Mirpass" on your site, make a server-to-server request to get a session ID.'}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed",children:[e.jsx("span",{className:"text-purple-400",children:"POST"})," ",t,"/sso/init",e.jsx("br",{}),e.jsx("span",{className:"text-blue-300",children:"Content-Type:"})," application/json",e.jsx("br",{}),e.jsx("span",{className:"text-blue-300",children:"X-Api-Key:"})," YOUR_API_KEY",e.jsx("br",{}),e.jsx("br",{}),`{ "appId": "${s.id}" }`]}),e.jsx(S,{className:"mt-2 text-sm text-gray-500",children:"Response (Failure):"}),e.jsx("div",{className:"mt-2 bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm text-gray-600 dark:text-gray-300 font-mono",children:`{
  "status": 200,
  "message": "Session initiated",
  "data": {
    "sessionId": "sess_abc123...",
    "pollSecret": "secret_xyz...",
    "loginUrl": "${a}/login?sso=sess_abc123..." 
  }
}`})]}),e.jsxs("div",{children:[e.jsx(z,{level:4,children:"2. Redirect User"}),e.jsx(S,{children:"Redirect the user's browser to the returned `login_url` (appended to the Mirpass frontend domain). You can optionally include a `from` parameter to redirect the user back to your site after login."}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed",children:[a,"/login?sso=sess_abc123...&from=https://yoursite.com/callback"]}),e.jsxs(S,{className:"mt-2 text-sm",children:["After successful authorization, the user will be redirected to:",e.jsx("br",{}),e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded",children:"https://yoursite.com/callback?code=AUTH_CODE_123..."})]})]}),e.jsxs("div",{children:[e.jsx(z,{level:4,children:"3. Poll for Status (If not redirecting)"}),e.jsx(S,{children:"Use the `pollSecret` returned in step 1 to securely poll the status. Note: If the user is redirected (Step 2), the auth code will be delivered there, and subsequent polling will not satisfy the code delivery."}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed",children:[e.jsx("span",{className:"text-green-400",children:"GET"})," ",t,"/sso/poll?sessionId=sess_abc123...&secret=secret_xyz..."]}),e.jsx(S,{className:"mt-2 text-sm text-gray-500",children:"Response (Pending):"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono mb-2",children:`{
  "status": 200,
  "message": "pending",
  "data": { "status": "pending" }
}`}),e.jsx(S,{className:"text-sm text-gray-500",children:"Response (Confirmed):"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono",children:`{
  "status": 200,
  "message": "confirmed",
  "data": {
    "status": "confirmed",
    "authCode": "AUTH_CODE_123..."
  }
}`})]}),e.jsxs("div",{children:[e.jsx(z,{level:4,children:"4. Exchange Code for Token"}),e.jsx(S,{children:"Once you receive the `authCode` (via redirect or polling), exchange it for a user access token. The code is valid for 10 minutes and can be used only once."}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed",children:[e.jsx("span",{className:"text-purple-400",children:"POST"})," ",t,"/sso/token",e.jsx("br",{}),e.jsx("span",{className:"text-blue-300",children:"Content-Type:"})," application/json",e.jsx("br",{}),e.jsx("br",{}),'{ "code": "AUTH_CODE_123..." }']}),e.jsx(S,{className:"mt-2 text-sm text-gray-500",children:"Response:"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono",children:`{
  "token": "eyJhbGciOiJIUzI1Ni...",
  "username": "john_doe"
}`})]}),e.jsxs("div",{children:[e.jsx(z,{level:4,children:"5. Verify Token"}),e.jsx(S,{children:"To ensure the token is valid and get user claims, verify it against our server."}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono",children:`{
  "status": 200,
  "message": "Token is valid",
  "data": {
    "valid": true,
    "username": "john_doe",
    "appId": "APP_ID"
  }
}`}),e.jsx(S,{className:"mt-2 text-sm text-gray-500",children:"Response:"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono",children:`{
  "valid": true,
  "username": "john_doe",
  "appId": "APP_ID"
          }`}),e.jsx(S,{className:"mt-2 text-sm text-gray-500",children:"If not valid:"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono",children:`{
  "valid": false
}`})]}),e.jsxs("div",{children:[e.jsx(z,{level:4,children:"6. Fetch User Info"}),e.jsx(S,{children:"Once you have a valid token or a username, you can fetch user profile information."}),e.jsx(P,{strong:!0,children:"Option A: Using the Access Token (Recommended)"}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed mt-2 mb-4",children:[e.jsx("span",{className:"text-purple-400",children:"GET"})," ",pe.API_URL,"/myprofile",e.jsx("br",{}),e.jsx("span",{className:"text-blue-400",children:"Authorization:"})," Bearer <token>"]}),e.jsx(P,{strong:!0,children:"Option B: By Username (Public)"}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed mt-2 mb-4",children:[e.jsx("span",{className:"text-purple-400",children:"GET"})," ",pe.API_URL,"/user/info?username=john_doe"]}),e.jsx(S,{className:"mt-2 text-sm text-gray-500",children:"Response (Success):"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono",children:`{
  "status": 200,
  "message": "User info retrieved",
  "data": {
    "username": "john_doe",
    "nickname": "John",
    "avatarUrl": "..."
  }`})]})]})}function js({app:s}){const[t,a]=n.useState(null),[r,d]=n.useState([]),[m,c]=n.useState(!1),[l,i]=n.useState(null);n.useEffect(()=>{u()},[s.id]),n.useEffect(()=>{g(l)},[l,s.id]);const u=async()=>{c(!0);try{const{data:o}=await $.get(`/apps/stats?id=${s.id}`);a(o.data)}catch{}finally{c(!1)}},g=async o=>{let x=`/apps/history?id=${s.id}`;o&&(x+=`&date=${$t(o)}&offset=${o.utcOffset()}`);try{const{data:h}=await $.get(x);d(h.data||[])}catch{}},p=n.useMemo(()=>t?.daily?t.daily:[],[t]);return m&&!t?e.jsx("div",{className:"p-4",children:"Loading stats..."}):t?e.jsxs("div",{children:[e.jsx(re,{title:"Summary",className:"bg-white/90",style:{margin:"10px 0"},children:e.jsxs(ke,{gutter:16,className:"text-center",children:[e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"Total Users",value:t.totalUsers})}),e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"Total Logins",value:t.totalLogins})}),e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"Active (24h)",value:t.activeUsers24h})}),e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"New (24h)",value:t.newUsers24h})})]})}),e.jsxs(ke,{gutter:16,children:[e.jsx(X,{xs:24,xl:12,children:e.jsx(re,{title:"Traffic (Last 7 Days)",style:{margin:"10px 0"},children:e.jsxs("div",{children:[e.jsx("div",{className:"flex items-end justify-between h-56 gap-2 px-2",children:p.map(o=>{const x=Math.max(...p.map(f=>Math.max(f.logins,f.activeUsers,f.newUsers))),h=x>0?160/x:0;return e.jsxs("div",{className:"flex flex-col items-center gap-2 group w-full overflow-hidden",children:[e.jsxs("div",{className:"flex gap-1 items-end h-[160px] w-full justify-center relative",children:[e.jsx("div",{className:"bg-indigo-400 dark:bg-indigo-600 w-3 rounded-t transition-all hover:bg-indigo-300",style:{height:`${Math.max(o.logins*h,4)}px`},title:`Logins: ${o.logins}`}),e.jsx("div",{className:"bg-emerald-400 dark:bg-emerald-600 w-3 rounded-t transition-all hover:bg-emerald-300",style:{height:`${Math.max(o.activeUsers*h,4)}px`},title:`Active Users: ${o.activeUsers}`}),e.jsx("div",{className:"bg-sky-400 dark:bg-sky-600 w-3 rounded-t transition-all hover:bg-sky-300",style:{height:`${Math.max(o.newUsers*h,4)}px`},title:`New Users: ${o.newUsers}`})]}),e.jsx("div",{className:"text-xs text-gray-500 whitespace-nowrap transform -rotate-45 origin-left mt-6 pl-4",children:ge.utc(o.date).format("MM-DD")})]},o.date)})}),e.jsxs("div",{className:"flex justify-center flex-wrap gap-x-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-indigo-400 rounded"}),e.jsx(P,{type:"secondary",className:"text-xs",children:"Logins"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-400 rounded"}),e.jsx(P,{type:"secondary",className:"text-xs",children:"Active Users"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-sky-400 rounded"}),e.jsx(P,{type:"secondary",className:"text-xs",children:"New Users"})]})]})]})})}),e.jsx(X,{xs:24,xl:12,children:e.jsxs(re,{title:"Login History",style:{margin:"10px 0"},extra:e.jsx(kt,{value:l,onChange:o=>i(o?o.utc():null),allowClear:!0}),children:[l&&e.jsxs(P,{children:[r.length," activities found"]}),e.jsx(we,{dataSource:r,size:"small",pagination:{pageSize:10},locale:{emptyText:"No activity on selected date"},columns:[{title:"User",dataIndex:"user",key:"user",render:o=>o?e.jsx("span",{className:"flex items-center gap-2",children:o}):e.jsx(P,{type:"secondary",children:"Unknown"})},{title:"Time",dataIndex:"time",key:"time",render:o=>Ne(o)}],rowKey:o=>o.time+(o.user||"unknown")})]})})]})]}):e.jsx("div",{className:"p-4",children:"No stats available."})}export{Rs as default};
