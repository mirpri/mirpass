import{bP as P,bQ as F,bR as y,bS as E,n as a,ab as M,an as R,bT as v,r as b,C as w,bU as G,bV as I}from"./index-B4XHSPnD.js";let c=null,l=e=>e(),g=[],p={};function h(){const{getContainer:e,duration:s,rtl:r,maxCount:n,top:t}=p,o=e?.()||document.body;return{getContainer:()=>o,duration:s,rtl:r,maxCount:n,top:t}}const _=a.forwardRef((e,s)=>{const{messageConfig:r,sync:n}=e,{getPrefixCls:t}=b.useContext(w),o=p.prefixCls||t("message"),f=b.useContext(G),[u,d]=I({...r,prefixCls:o,...f.message});return a.useImperativeHandle(s,()=>{const i={...u};return Object.keys(i).forEach(m=>{i[m]=(...x)=>(n(),u[m].apply(u,x))}),{instance:i,sync:n}}),d}),k=a.forwardRef((e,s)=>{const[r,n]=a.useState(h),t=()=>{n(h)};a.useEffect(t,[]);const o=v(),f=o.getRootPrefixCls(),u=o.getIconPrefixCls(),d=o.getTheme(),i=a.createElement(_,{ref:s,sync:t,messageConfig:r});return a.createElement(R,{prefixCls:f,iconPrefixCls:u,theme:d},o.holderRender?o.holderRender(i):i)}),C=()=>{if(!c){const e=document.createDocumentFragment(),s={fragment:e};c=s,l(()=>{E(a.createElement(k,{ref:r=>{const{instance:n,sync:t}=r||{};Promise.resolve().then(()=>{!s.instance&&n&&(s.instance=n,s.sync=t,C())})}}),e)});return}c.instance&&(g.forEach(e=>{const{type:s,skipped:r}=e;if(!r)switch(s){case"open":{l(()=>{const n=c.instance.open({...p,...e.config});n?.then(e.resolve),e.setCloseFn(n)});break}case"destroy":l(()=>{c?.instance.destroy(e.key)});break;default:l(()=>{var n;const t=(n=c.instance)[s].apply(n,M(e.args));t?.then(e.resolve),e.setCloseFn(t)})}}),g=[])};function H(e){p={...p,...e},l(()=>{c?.sync?.()})}function O(e){const s=y(r=>{let n;const t={type:"open",config:e,resolve:r,setCloseFn:o=>{n=o}};return g.push(t),()=>{n?l(()=>{n()}):t.skipped=!0}});return C(),s}function Q(e,s){const r=y(n=>{let t;const o={type:e,args:s,resolve:n,setCloseFn:f=>{t=f}};return g.push(o),()=>{t?l(()=>{t()}):o.skipped=!0}});return C(),r}const S=e=>{g.push({type:"destroy",key:e}),C()},A=["success","info","warning","error","loading"],D={open:O,destroy:S,config:H,useMessage:F,_InternalPanelDoNotUseOrYouWillBeFired:P},T=D;A.forEach(e=>{T[e]=(...s)=>Q(e,s)});export{T as s};
