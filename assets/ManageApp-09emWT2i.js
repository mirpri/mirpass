import{g as ye,w as ke,e as Te,r as n,f as ve,s as Ge,h as je,i as w,p as pe,x as Xe,y as qe,k as be,l as Je,z as Qe,R as Ze,t as et,_ as Se,D as tt,E as st,F as nt,G as at,H as ot,C as Ee,J as rt,K as lt,M as Ie,B as k,N as it,O as ct,P as dt,Q as mt,T as ut,U as pt,q as xt,m as gt,V as ft,W as ht,X as yt,d as Ae,I as Pe,Y as vt,u as jt,c as I,j as e,A as bt,b as Ct,v as wt}from"./index-BtQilkke.js";import{I as Nt}from"./antd-img-crop.esm-Ce0_xqPV.js";import{d as xe,f as Ce,t as St,F as we,D as It,M as ge,S as ae,U as $t,R as kt,a as le}from"./date-Co5zdWE4.js";import{s as N}from"./index-xphwZMwG.js";import{C as re,T as Tt,R as Et}from"./index-BTQ6B5bA.js";import{S as q}from"./TextArea-d1BLIjnm.js";import{T as At}from"./index-CNaZsIK2.js";import{T as Re}from"./index-CqcSC2Qt.js";import{R as Pt}from"./ArrowLeftOutlined-B4qTmohm.js";import{R as $e,C as X,F as A,I as B}from"./index-Du-RPus6.js";import{D as Rt}from"./index-Ddxff6ue.js";const oe=(t,s,a,r,c)=>({background:t,border:`${Te(r.lineWidth)} ${r.lineType} ${s}`,[`${c}-icon`]:{color:a}}),Ut=t=>{const{componentCls:s,motionDurationSlow:a,marginXS:r,marginSM:c,fontSize:m,fontSizeLG:i,lineHeight:l,borderRadiusLG:d,motionEaseInOutCirc:u,withDescriptionIconSize:g,colorText:p,colorTextHeading:o,withDescriptionPadding:x,defaultPadding:h}=t;return{[s]:{...ke(t),position:"relative",display:"flex",alignItems:"center",padding:h,wordWrap:"break-word",borderRadius:d,[`&${s}-rtl`]:{direction:"rtl"},[`${s}-section`]:{flex:1,minWidth:0},[`${s}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:m,lineHeight:l},"&-title":{color:o},[`&${s}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${u}, opacity ${a} ${u},
        padding-top ${a} ${u}, padding-bottom ${a} ${u},
        margin-bottom ${a} ${u}`},[`&${s}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}},[`${s}-with-description`]:{alignItems:"flex-start",padding:x,[`${s}-icon`]:{marginInlineEnd:c,fontSize:g,lineHeight:0},[`${s}-title`]:{display:"block",marginBottom:r,color:o,fontSize:i},[`${s}-description`]:{display:"block",color:p}},[`${s}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Mt=t=>{const{componentCls:s,colorSuccess:a,colorSuccessBorder:r,colorSuccessBg:c,colorWarning:m,colorWarningBorder:i,colorWarningBg:l,colorError:d,colorErrorBorder:u,colorErrorBg:g,colorInfo:p,colorInfoBorder:o,colorInfoBg:x}=t;return{[s]:{"&-success":oe(c,r,a,t,s),"&-info":oe(x,o,p,t,s),"&-warning":oe(l,i,m,t,s),"&-error":{...oe(g,u,d,t,s),[`${s}-description > pre`]:{margin:0,padding:0}}}}},zt=t=>{const{componentCls:s,iconCls:a,motionDurationMid:r,marginXS:c,fontSizeIcon:m,colorIcon:i,colorIconHover:l}=t;return{[s]:{"&-actions":{marginInlineStart:c},[`${s}-close-icon`]:{marginInlineStart:c,padding:0,overflow:"hidden",fontSize:m,lineHeight:Te(m),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:i,transition:`color ${r}`,"&:hover":{color:l}}},"&-close-text":{color:i,transition:`color ${r}`,"&:hover":{color:l}}}}},Ot=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}),Dt=ye("Alert",t=>[Ut(t),Mt(t),zt(t)],Ot),Lt=t=>{const{icon:s,type:a,className:r,style:c,successIcon:m,infoIcon:i,warningIcon:l,errorIcon:d}=t,u={success:m??n.createElement(Ze,null),info:i??n.createElement(Qe,null),error:d??n.createElement(Je,null),warning:l??n.createElement(be,null)};return n.createElement("span",{className:r,style:c},s??u[a])},Bt=t=>{const{isClosable:s,prefixCls:a,closeIcon:r,handleClose:c,ariaProps:m,className:i,style:l}=t,d=r===!0||r===void 0?n.createElement(et,null):r;return s?n.createElement("button",{type:"button",onClick:c,className:w(`${a}-close-icon`,i),tabIndex:0,style:l,...m},d):null},Ue=n.forwardRef((t,s)=>{const{description:a,prefixCls:r,message:c,title:m,banner:i,className:l,rootClassName:d,style:u,onMouseEnter:g,onMouseLeave:p,onClick:o,afterClose:x,showIcon:h,closable:f,closeText:b,closeIcon:y,action:v,id:j,styles:P,classNames:J,...Q}=t,V=m??c,[W,Y]=n.useState(!1),O=n.useRef(null);n.useImperativeHandle(s,()=>({nativeElement:O.current}));const{getPrefixCls:Z,direction:S,closable:T,closeIcon:G,className:_,style:R,classNames:$,styles:U,successIcon:ee,infoIcon:E,warningIcon:te,errorIcon:ie}=ve("alert"),C=Z("alert",r),[ce,ne]=Dt(C),{onClose:de,afterClose:Le}=f&&typeof f=="object"?f:{},Be=D=>{Y(!0),(de??t.onClose)?.(D)},me=n.useMemo(()=>t.type!==void 0?t.type:i?"warning":"info",[t.type,i]),Ne=n.useMemo(()=>typeof f=="object"&&f.closeIcon||b?!0:typeof f=="boolean"?f:y!==!1&&Ge(y)?!0:!!T,[b,y,f,T]),ue=i&&h===void 0?!0:h,_e={...t,prefixCls:C,type:me,showIcon:ue,closable:Ne},[H,F]=je([$,J],[U,P],{props:_e}),He=w(C,`${C}-${me}`,{[`${C}-with-description`]:!!a,[`${C}-no-icon`]:!ue,[`${C}-banner`]:!!i,[`${C}-rtl`]:S==="rtl"},_,l,d,H.root,ne,ce),Fe=pe(Q,{aria:!0,data:!0}),Ke=n.useMemo(()=>typeof f=="object"&&f.closeIcon?f.closeIcon:b||(y!==void 0?y:typeof T=="object"&&T.closeIcon?T.closeIcon:G),[y,f,T,b,G]),Ve=n.useMemo(()=>{const D=f??T;return typeof D=="object"?pe(D,{data:!0,aria:!0}):{}},[f,T]);return n.createElement(Xe,{visible:!W,motionName:`${C}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:D=>({maxHeight:D.offsetHeight}),onLeaveEnd:Le??x},({className:D,style:We},Ye)=>n.createElement("div",{id:j,ref:qe(O,Ye),"data-show":!W,className:w(He,D),style:{...F.root,...R,...u,...We},onMouseEnter:g,onMouseLeave:p,onClick:o,role:"alert",...Fe},ue?n.createElement(Lt,{className:w(`${C}-icon`,H.icon),style:F.icon,description:a,icon:t.icon,prefixCls:C,type:me,successIcon:ee,infoIcon:E,warningIcon:te,errorIcon:ie}):null,n.createElement("div",{className:w(`${C}-section`,H.section),style:F.section},V?n.createElement("div",{className:w(`${C}-title`,H.title),style:F.title},V):null,a?n.createElement("div",{className:w(`${C}-description`,H.description),style:F.description},a):null),v?n.createElement("div",{className:w(`${C}-actions`,H.actions),style:F.actions},v):null,n.createElement(Bt,{className:H.close,style:F.close,isClosable:Ne,prefixCls:C,closeIcon:Ke,handleClose:Be,ariaProps:Ve})))});function _t(t,s,a){return s=Se(s),tt(t,st()?Reflect.construct(s,a||[],Se(t).constructor):s.apply(t,a))}let Ht=(function(t){function s(){var a;return ot(this,s),a=_t(this,s,arguments),a.state={error:void 0,info:{componentStack:""}},a}return nt(s,t),at(s,[{key:"componentDidCatch",value:function(r,c){this.setState({error:r,info:c})}},{key:"render",value:function(){const{message:r,title:c,description:m,id:i,children:l}=this.props,{error:d,info:u}=this.state,g=c??r,p=u?.componentStack||null,o=typeof g>"u"?(d||"").toString():g,x=typeof m>"u"?p:m;return d?n.createElement(Ue,{id:i,type:"error",title:o,description:n.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},x)}):l}}])})(n.Component);const Me=Ue;Me.ErrorBoundary=Ht;const Ft=t=>{const{componentCls:s,iconCls:a,antCls:r,zIndexPopup:c,colorText:m,colorWarning:i,marginXXS:l,marginXS:d,fontSize:u,fontWeightStrong:g,colorTextHeading:p}=t;return{[s]:{zIndex:c,[`&${r}-popover`]:{fontSize:u},[`${s}-message`]:{marginBottom:d,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${s}-message-icon ${a}`]:{color:i,fontSize:u,lineHeight:1,marginInlineEnd:d},[`${s}-title`]:{fontWeight:g,color:p,"&:only-child":{fontWeight:"normal"}},[`${s}-description`]:{marginTop:l,color:m}},[`${s}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:d}}}}},Kt=t=>{const{zIndexPopupBase:s}=t;return{zIndexPopup:s+60}},ze=ye("Popconfirm",t=>Ft(t),Kt,{resetStyle:!1}),Oe=t=>{const{prefixCls:s,okButtonProps:a,cancelButtonProps:r,title:c,description:m,cancelText:i,okText:l,okType:d="primary",icon:u=n.createElement(be,null),showCancel:g=!0,close:p,onConfirm:o,onCancel:x,onPopupClick:h,classNames:f,styles:b}=t,{getPrefixCls:y}=n.useContext(Ee),[v]=rt("Popconfirm",lt.Popconfirm),j=Ie(c),P=Ie(m);return n.createElement("div",{className:`${s}-inner-content`,onClick:h},n.createElement("div",{className:`${s}-message`},u&&n.createElement("span",{className:`${s}-message-icon`},u),n.createElement("div",{className:`${s}-message-text`},j&&n.createElement("div",{className:w(`${s}-title`,f?.title),style:b?.title},j),P&&n.createElement("div",{className:w(`${s}-description`,f?.content),style:b?.content},P))),n.createElement("div",{className:`${s}-buttons`},g&&n.createElement(k,{onClick:x,size:"small",...r},i||v?.cancelText),n.createElement(it,{buttonProps:{size:"small",...ct(d),...a},actionFn:o,close:p,prefixCls:y("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},l||v?.okText)))},Vt=t=>{const{prefixCls:s,placement:a,className:r,style:c,...m}=t,{getPrefixCls:i}=n.useContext(Ee),l=i("popconfirm",s);return ze(l),n.createElement(dt,{placement:a,className:w(l,r),style:c,content:n.createElement(Oe,{prefixCls:l,...m})})},Wt=n.forwardRef((t,s)=>{const{prefixCls:a,placement:r="top",trigger:c,okType:m="primary",icon:i=n.createElement(be,null),children:l,overlayClassName:d,onOpenChange:u,overlayStyle:g,styles:p,arrow:o,classNames:x,...h}=t,{getPrefixCls:f,className:b,style:y,classNames:v,styles:j,arrow:P,trigger:J}=ve("popconfirm"),[Q,V]=mt(t.defaultOpen??!1,t.open),W=ut(o,P),Y=c||J||"click",O=E=>{V(E),u?.(E)},Z=()=>{O(!1)},S=E=>t.onConfirm?.call(void 0,E),T=E=>{O(!1),t.onCancel?.call(void 0,E)},G=E=>{const{disabled:te=!1}=t;te||O(E)},_=f("popconfirm",a),R={...t,placement:r,trigger:Y,okType:m,overlayStyle:g,styles:p,classNames:x},[$,U]=je([v,x],[j,p],{props:R}),ee=w(_,b,d,$.root);return ze(_),n.createElement(pt,{arrow:W,...xt(h,["title"]),trigger:Y,placement:r,onOpenChange:G,open:Q,ref:s,classNames:{root:ee,container:$.container,arrow:$.arrow},styles:{root:{...y,...U.root,...g},container:U.container,arrow:U.arrow},content:n.createElement(Oe,{okType:m,icon:i,...t,prefixCls:_,close:Z,onConfirm:S,onCancel:T,classNames:$,styles:U}),"data-popover-inject":!0},l)}),se=Wt;se._InternalPanelDoNotUseOrYouWillBeFired=Vt;const Yt=t=>{const{value:s,formatter:a,precision:r,decimalSeparator:c,groupSeparator:m="",prefixCls:i}=t;let l;if(typeof a=="function")l=a(s);else{const d=String(s),u=d.match(/^(-?)(\d*)(\.(\d+))?$/);if(!u||d==="-")l=d;else{const g=u[1];let p=u[2]||"0",o=u[4]||"";p=p.replace(/\B(?=(\d{3})+(?!\d))/g,m),typeof r=="number"&&(o=o.padEnd(r,"0").slice(0,r>0?r:0)),o&&(o=`${c}${o}`),l=[n.createElement("span",{key:"int",className:`${i}-content-value-int`},g,p),o&&n.createElement("span",{key:"decimal",className:`${i}-content-value-decimal`},o)]}}return n.createElement("span",{className:`${i}-content-value`},l)},Gt=t=>{const{componentCls:s,marginXXS:a,padding:r,colorTextDescription:c,titleFontSize:m,colorTextHeading:i,contentFontSize:l,fontFamily:d}=t;return{[s]:{...ke(t),[`${s}-header`]:{paddingBottom:a,[`${s}-title`]:{color:c,fontSize:m}},[`${s}-skeleton`]:{paddingTop:r},[`${s}-content`]:{color:i,fontSize:l,fontFamily:d,[`${s}-content-value`]:{display:"inline-block",direction:"ltr"},[`${s}-content-prefix, ${s}-content-suffix`]:{display:"inline-block"},[`${s}-content-prefix`]:{marginInlineEnd:a},[`${s}-content-suffix`]:{marginInlineStart:a}}}}},Xt=t=>{const{fontSizeHeading3:s,fontSize:a}=t;return{titleFontSize:a,contentFontSize:s}},qt=ye("Statistic",t=>{const s=gt(t,{});return Gt(s)},Xt),K=n.forwardRef((t,s)=>{const{prefixCls:a,className:r,rootClassName:c,style:m,valueStyle:i,value:l=0,title:d,valueRender:u,prefix:g,suffix:p,loading:o=!1,formatter:x,precision:h,decimalSeparator:f=".",groupSeparator:b=",",onMouseEnter:y,onMouseLeave:v,styles:j,classNames:P,...J}=t,{getPrefixCls:Q,direction:V,className:W,style:Y,classNames:O,styles:Z}=ve("statistic"),S=Q("statistic",a),[T,G]=qt(S),_={...t,decimalSeparator:f,groupSeparator:b,loading:o,value:l},[R,$]=je([O,P],[Z,j],{props:_}),U=n.createElement(Yt,{decimalSeparator:f,groupSeparator:b,prefixCls:S,formatter:x,precision:h,value:l}),ee=w(S,{[`${S}-rtl`]:V==="rtl"},W,r,c,R.root,T,G),E=w(`${S}-header`,R.header),te=w(`${S}-title`,R.title),ie=w(`${S}-content`,R.content),C=w(`${S}-content-prefix`,R.prefix),ce=w(`${S}-content-suffix`,R.suffix),ne=n.useRef(null);n.useImperativeHandle(s,()=>({nativeElement:ne.current}));const de=pe(J,{aria:!0,data:!0});return n.createElement("div",{...de,className:ee,style:{...$.root,...Y,...m},ref:ne,onMouseEnter:y,onMouseLeave:v},d&&n.createElement("div",{className:E,style:$.header},n.createElement("div",{className:te,style:$.title},d)),n.createElement(ft,{paragraph:!1,loading:o,className:`${S}-skeleton`,active:!0},n.createElement("div",{className:ie,style:{...i,...$.content}},g&&n.createElement("span",{className:C,style:$.prefix},g),u?u(U):U,p&&n.createElement("span",{className:ce,style:$.suffix},p))))}),Jt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Qt(t,s){let a=t;const r=/\[[^\]]*]/g,c=(s.match(r)||[]).map(d=>d.slice(1,-1)),m=s.replace(r,"[]"),i=Jt.reduce((d,[u,g])=>{if(d.includes(u)){const p=Math.floor(a/g);return a-=p*g,d.replace(new RegExp(`${u}+`,"g"),o=>{const x=o.length;return p.toString().padStart(x,"0")})}return d},m);let l=0;return i.replace(r,()=>{const d=c[l];return l+=1,d})}function Zt(t,s,a){const{format:r=""}=s,c=new Date(t).getTime(),m=Date.now(),i=Math.max(a?c-m:m-c,0);return Qt(i,r)}const es=1e3/60;function ts(t){return new Date(t).getTime()}const De=t=>{const{value:s,format:a="HH:mm:ss",onChange:r,onFinish:c,type:m,...i}=t,l=m==="countdown",[d,u]=n.useState(null),g=ht(()=>{const x=Date.now(),h=ts(s);u({});const f=l?h-x:x-h;return r?.(f),l&&h<x?(c?.(),!1):!0});n.useEffect(()=>{let x;const h=()=>{g()||window.clearInterval(x)},f=()=>{x=window.setInterval(h,es)},b=()=>{window.clearInterval(x)};return f(),()=>{b()}},[s,l]),n.useEffect(()=>{u({})},[]);const p=(x,h)=>d?Zt(x,{...h,format:a},l):"-",o=x=>yt(x,{title:void 0});return n.createElement(K,{...i,value:s,valueRender:o,formatter:p})},ss=t=>n.createElement(De,{...t,type:"countdown"}),ns=n.memo(ss);K.Timer=De;K.Countdown=ns;const as=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],os=Ae("ban",as);const rs=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ls=Ae("copy",rs);var is={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fe.apply(this,arguments)}const cs=(t,s)=>n.createElement(Pe,fe({},t,{ref:s,icon:is})),ds=n.forwardRef(cs);var ms={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};function he(){return he=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},he.apply(this,arguments)}const us=(t,s)=>n.createElement(Pe,he({},t,{ref:s,icon:ms})),ps=n.forwardRef(us),{Title:L,Text:z,Paragraph:M}=At;function Es(){const{appId:t}=vt(),s=jt(),[a,r]=n.useState(null);n.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{const{data:i}=await I.get(`/apps/details?id=${t}`);r(i.data)}catch{N.error("Could not load app details"),s("/dashboard")}};if(!a)return e.jsx("div",{className:"p-8",children:"Loading..."});const m=[{key:"stats",label:"Analytics",children:e.jsx(ys,{app:a})},{key:"keys",label:"API Keys",children:e.jsx(xs,{app:a})},{key:"members",label:"Members",children:e.jsx(gs,{app:a})},{key:"help",label:"Integration Guide",children:e.jsx(hs,{})},{key:"settings",label:"Settings",children:e.jsx(fs,{app:a,onUpdate:c,onDelete:()=>s("/dashboard")})}];return e.jsxs(re,{className:"max-w-5xl w-full rounded-[18px] bg-white/95 shadow-xl p-6",title:"Manage Application",extra:e.jsx(k,{icon:e.jsx(Pt,{}),onClick:()=>s(-1),children:"Back"}),children:[e.jsxs(q,{size:10,align:"center",className:"mb-3",children:[e.jsx(bt,{size:48,src:a.logoUrl,children:a.name.charAt(0).toUpperCase()}),e.jsx(L,{level:3,style:{marginBottom:0},children:a.name}),e.jsx(Re,{color:"blue",children:a.role})]}),a.suspendUntil&&xe(a.suspendUntil).isAfter(xe())&&e.jsx(Me,{type:"error",title:"This app is suspended until "+Ce(a.suspendUntil)}),e.jsx(Tt,{defaultActiveKey:"stats",items:m})]})}function xs({app:t}){const[s,a]=n.useState([]),[r,c]=n.useState(!1),[m,i]=n.useState(!1),[l,d]=n.useState(""),[u,g]=n.useState(!1),[p,o]=n.useState("");n.useEffect(()=>{x()},[t.id]);const x=async()=>{c(!0);try{const{data:y}=await I.get(`/apps/keys?id=${t.id}`);a(y.data||[])}catch{}finally{c(!1)}},h=async()=>{try{const{data:y}=await I.post("/apps/keys/create",{appId:t.id,name:l});o(y.data.key),i(!1),g(!0),d(""),x()}catch{N.error("Failed to create API key")}},f=async y=>{try{await I.post("/apps/keys/delete",{appId:t.id,keyId:y}),N.success("Key deleted"),x()}catch{N.error("Could not delete key")}},b=[{title:"Name",dataIndex:"name",key:"name",render:y=>y||e.jsx(z,{type:"secondary",children:"Unnamed"})},{title:"ID",dataIndex:"id",key:"id"},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:y=>Ce(y)},{title:"Action",key:"action",render:(y,v)=>e.jsx(se,{title:"Delete this key?",onConfirm:()=>f(v.id),okText:"Yes",cancelText:"No",children:e.jsx(k,{danger:!0,size:"small",icon:e.jsx(le,{}),children:"Delete"})})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(z,{children:"Manage your API keys for accessing the service."}),t.role!=="external"&&e.jsx(k,{type:"primary",icon:e.jsx(Et,{}),onClick:()=>i(!0),children:"Create New Key"})]}),e.jsx(we,{dataSource:s,columns:b,rowKey:"id",loading:r,pagination:!1}),e.jsx(ge,{title:"Create New API Key",open:m,onCancel:()=>i(!1),onOk:h,okText:"Create",children:e.jsx(A,{layout:"vertical",children:e.jsx(A.Item,{label:"Key Name (Optional)",children:e.jsx(B,{placeholder:"e.g. Production Key",value:l,onChange:y=>d(y.target.value)})})})}),e.jsx(ge,{title:"API Key Created",open:u,onCancel:()=>g(!1),footer:[e.jsx(k,{type:"primary",onClick:()=>g(!1),children:"Done"},"close")],children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(z,{type:"secondary",children:"Copy this key now. You won't see it again."}),e.jsxs(q.Compact,{style:{width:"100%"},children:[e.jsx(B,{value:p,readOnly:!0}),e.jsx(k,{onClick:()=>{navigator.clipboard.writeText(p),N.success("Copied to clipboard")},children:e.jsx(ls,{size:16})})]})]})})]})}function gs({app:t}){const[s,a]=n.useState([]),[r,c]=n.useState(!1),[m,i]=n.useState(!1),[l,d]=n.useState(""),[u,g]=n.useState("admin"),{profile:p}=Ct();n.useEffect(()=>{o()},[t.id]);const o=async()=>{c(!0);try{const{data:v}=await I.get(`/apps/members?id=${t.id}`);a(v.data||[])}catch{}finally{c(!1)}},x=async()=>{try{await I.post("/apps/members/add",{appId:t.id,username:l,role:u}),N.success("Member added"),i(!1),d(""),o()}catch(v){const j=v.response?.data?.message||"Failed to add member";N.error(j)}},h=async v=>{try{await I.post("/apps/members/remove",{appId:t.id,username:v}),N.success("Member removed"),o()}catch{N.error("Failed to remove member")}},f=async(v,j)=>{try{await I.post("/apps/members/role",{appId:t.id,username:v,role:j}),N.success("Role updated"),o()}catch{N.error("Failed to update role")}},b=[{label:"Admin",value:"admin"},{label:"Root",value:"root"}],y=[{title:"Username",dataIndex:"username",key:"username"},{title:"Role",dataIndex:"role",key:"role",render:v=>e.jsx(Re,{color:v==="root"?"gold":"blue",children:v})},{title:"Action",key:"action",render:(v,j)=>j.username===p?.username?e.jsx(q,{children:e.jsx(se,{title:"Remove yourself? You'll lose access to this app!",onConfirm:()=>h(j.username),okText:"Yes",cancelText:"No",children:e.jsx(k,{danger:!0,size:"small",icon:e.jsx(le,{}),children:"Leave"})})}):t.role!=="root"?e.jsx(os,{size:18}):e.jsxs(q,{children:[e.jsx(ae,{value:j.role,onChange:P=>f(j.username,P),options:b,size:"small",className:"w-20"}),e.jsx(se,{title:`Remove ${j.username} from this app?`,onConfirm:()=>h(j.username),okText:"Yes",cancelText:"No",children:e.jsx(k,{danger:!0,size:"small",icon:e.jsx(le,{})})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(z,{children:"Manage team members and their access levels."}),t.role==="root"&&e.jsx(k,{type:"primary",icon:e.jsx(ps,{}),onClick:()=>i(!0),children:"Add Member"})]}),e.jsx(we,{dataSource:s,columns:y,rowKey:"username",loading:r,pagination:!1}),e.jsx(ge,{title:"Add New Member",open:m,onCancel:()=>i(!1),onOk:x,okText:"Add",children:e.jsxs(A,{layout:"vertical",children:[e.jsx(A.Item,{label:"Username",required:!0,children:e.jsx(B,{value:l,onChange:v=>d(v.target.value),placeholder:"Username"})}),e.jsx(A.Item,{label:"Role",required:!0,children:e.jsxs(ae,{value:u,onChange:g,children:[e.jsx(ae.Option,{value:"admin",children:"Admin"}),e.jsx(ae.Option,{value:"root",children:"Root"})]})})]})})]})}function fs({app:t,onUpdate:s,onDelete:a}){const[r]=A.useForm(),[c,m]=n.useState(!1),[i,l]=n.useState(null);n.useEffect(()=>{r.setFieldsValue({name:t.name,description:t.description,logoUrl:t.logoUrl}),l(null)},[t]);const d=async p=>{m(!0);try{if(i){const o=new FormData;o.append("appId",t.id),o.append("name",p.name),o.append("description",p.description||""),o.append("logoUrl",p.logoUrl||""),o.append("file",i),await I.post("/apps/update",o,{headers:{"Content-Type":"multipart/form-data"}})}else await I.post("/apps/update",{appId:t.id,name:p.name,description:p.description,logoUrl:p.logoUrl});N.success("App updated"),s(),l(null)}catch(o){console.error(o),N.error("Failed to update app")}finally{m(!1)}},u=async()=>{try{await I.post("/apps/delete",{appId:t.id}),N.success("App deleted"),a()}catch(p){const o=p.response?.data?.message||"Failed to delete app";N.error(o)}},g=t.role==="root";return e.jsxs("div",{className:"max-w-3xl",children:[e.jsx(L,{level:4,children:"General Settings"}),e.jsxs(A,{form:r,layout:"vertical",onFinish:d,children:[e.jsx(A.Item,{label:"App Name",name:"name",rules:[{required:!0,message:"Please input app name!"}],children:e.jsx(B,{})}),e.jsx(A.Item,{label:"Description",name:"description",children:e.jsx(B.TextArea,{rows:4})}),e.jsx(A.Item,{label:"Logo URL",children:e.jsxs(q.Compact,{style:{width:"100%"},children:[e.jsx(A.Item,{name:"logoUrl",noStyle:!0,children:e.jsx(B,{placeholder:"https://example.com/logo.png"})}),e.jsx(Nt,{rotationSlider:!0,children:e.jsx($t,{showUploadList:!1,customRequest:({file:p,onSuccess:o})=>{const x=p;l(x);const h=URL.createObjectURL(x);r.setFieldValue("logoUrl",h),N.success("Logo selected. Click Save to apply."),o?.("ok")},children:e.jsx(k,{icon:e.jsx(kt,{}),children:"Select"})})})]})}),e.jsx(A.Item,{children:e.jsx(k,{type:"primary",htmlType:"submit",icon:e.jsx(ds,{}),loading:c,children:"Save Changes"})})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(Rt,{}),e.jsxs("div",{className:"border border-red-200 dark:border-red-900 p-4 rounded-lg bg-red-50 dark:bg-red-900/20",children:[e.jsx(L,{level:5,type:"danger",children:"Danger Zone"}),e.jsx(M,{children:"Deleting this application will remove all associated data, including API keys and member associations. This action cannot be undone."}),e.jsx(se,{title:"Are you sure you want to delete this app?",description:"This action cannot be undone.",onConfirm:u,okText:"Yes, delete it",okType:"danger",cancelText:"Cancel",children:e.jsx(k,{type:"primary",danger:!0,icon:e.jsx(le,{}),children:"Delete Application"})})]})]})]})}function hs(){const t=wt.API_URL,s=window.location.origin,[a,r]=n.useState(""),[c,m]=n.useState(""),i=async()=>{try{const{data:l}=await I.post("/sso/init",{},{headers:{"X-Api-Key":a}}),d=l.data.loginUrl+(c?`&from=${encodeURIComponent(c)}`:"");N.success("Test session created"),window.open(d,"_blank")}catch(l){const d=l,u=d.response?.status,g=d.response?.data?.message;return console.error("Failed to create test session",d),N.error(g+` (Status: ${u})`),null}};return e.jsxs("div",{className:"max-w-3xl space-y-8",children:[e.jsxs("div",{children:[e.jsx(L,{level:3,children:"Mirpass SSO Integration Guide"}),e.jsx(M,{children:"Integrate secure Single Sign-On (SSO) into your application using Mirpass. Use your API keys to initiate login sessions and retrieve user credentials securely."}),e.jsxs(q,{direction:"vertical",className:"w-full max-w-xl",children:[e.jsx(B,{placeholder:"Api Key",value:a,onChange:l=>r(l.target.value)}),e.jsx(B,{placeholder:"Redirect URL (Optional)",value:c,onChange:l=>m(l.target.value)}),e.jsx(k,{onClick:i,type:"primary",children:"Create test session"})]})]}),e.jsxs("div",{children:[e.jsx(L,{level:4,children:"1. Initiate Login Session"}),e.jsx(M,{children:'When a user clicks "Login with Mirpass" on your site, make a server-to-server request to get a session ID. Do not expose your API Key to the frontend.'}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed",children:[e.jsx("span",{className:"text-purple-400",children:"POST"})," ",t,"/sso/init",e.jsx("br",{}),e.jsx("span",{className:"text-blue-300",children:"X-Api-Key:"})," YOUR_API_KEY",e.jsx("br",{})]}),e.jsx("div",{className:"mt-2 bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm text-gray-600 dark:text-gray-300 font-mono",children:`{
  "status": "success",
  "data": {
    "sessionId": "sess_abc123...",
    "loginUrl": "${s}/login?sso=sess_abc123..." 
  }
}`})]}),e.jsxs("div",{children:[e.jsx(L,{level:4,children:"2. Redirect User"}),e.jsx(M,{children:"Redirect the user's browser to the returned `login_url` (appended to the Mirpass frontend domain). You can optionally include a `from` parameter to redirect the user back to your site after login."}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-3 rounded text-blue-600 dark:text-blue-400 font-mono text-sm break-all",children:[s,"/login?sso=sess_abc123...&from=https://yoursite.com/callback"]}),e.jsxs(M,{className:"mt-2 text-sm",children:["After successful authorization, the user will be redirected to:",e.jsx("br",{}),e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded",children:"https://yoursite.com/callback?mirpass_sso=sess_abc123..."})]})]}),e.jsxs("div",{children:[e.jsx(L,{level:4,children:"3. Poll for Status"}),e.jsx(M,{children:"While the user is logging in on Mirpass, your client can poll the status endpoint using the `session_id`. Use this when your client is not a web app and won't be able to receive redirects, or if you want to show real-time status updates."}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed",children:[e.jsx("span",{className:"text-green-400",children:"GET"})," ",t,"/sso/poll?sessionId=sess_abc123..."]}),e.jsx(M,{className:"mt-2 text-sm text-gray-500",children:"Response (Pending):"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono mb-2",children:'{ "status": "pending" }'}),e.jsx(M,{className:"text-sm text-gray-500",children:"Response (Confirmed):"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono",children:`{
  "status": "confirmed",
  "username": "john_doe",
  "token": "eyJhbGciOiJIUzI1Ni..." // Short-lived SSO Token
}`})]}),e.jsxs("div",{children:[e.jsx(L,{level:4,children:"4. Verify Token (Optional)"}),e.jsx(M,{children:"To ensure the token is valid and get user claims, verify it against our server."}),e.jsxs("div",{className:"bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono leading-relaxed",children:[e.jsx("span",{className:"text-purple-400",children:"POST"})," ",t,"/sso/verify",e.jsx("br",{}),e.jsx("span",{className:"text-blue-300",children:"Content-Type:"})," application/json",e.jsx("br",{}),e.jsx("br",{}),'{ "token": "eyJhbGciOiJIUzI1Ni..." }']})]})]})}function ys({app:t}){const[s,a]=n.useState(null),[r,c]=n.useState([]),[m,i]=n.useState(!1),[l,d]=n.useState(null);n.useEffect(()=>{u()},[t.id]),n.useEffect(()=>{g(l)},[l,t.id]);const u=async()=>{i(!0);try{const{data:o}=await I.get(`/apps/stats?id=${t.id}`);a(o.data)}catch{}finally{i(!1)}},g=async o=>{let x=`/apps/history?id=${t.id}`;o&&(x+=`&date=${St(o)}&offset=${o.utcOffset()}`);try{const{data:h}=await I.get(x);c(h.data||[])}catch{}},p=n.useMemo(()=>s?.daily?s.daily:[],[s]);return m&&!s?e.jsx("div",{className:"p-4",children:"Loading stats..."}):s?e.jsxs("div",{children:[e.jsx(re,{title:"Summary",className:"bg-white/90",style:{margin:"10px 0"},children:e.jsxs($e,{gutter:16,className:"text-center",children:[e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"Total Users",value:s.totalUsers})}),e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"Total Logins",value:s.totalLogins})}),e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"Active (24h)",value:s.activeUsers24h})}),e.jsx(X,{xs:12,sm:6,children:e.jsx(K,{title:"New (24h)",value:s.newUsers24h})})]})}),e.jsxs($e,{gutter:16,children:[e.jsx(X,{xs:24,xl:12,children:e.jsx(re,{title:"Traffic (Last 7 Days)",style:{margin:"10px 0"},children:e.jsxs("div",{children:[e.jsx("div",{className:"flex items-end justify-between h-56 gap-2 px-2",children:p.map(o=>{const x=Math.max(...p.map(f=>Math.max(f.logins,f.activeUsers,f.newUsers))),h=x>0?160/x:0;return e.jsxs("div",{className:"flex flex-col items-center gap-2 group w-full overflow-hidden",children:[e.jsxs("div",{className:"flex gap-1 items-end h-[160px] w-full justify-center relative",children:[e.jsx("div",{className:"bg-indigo-400 dark:bg-indigo-600 w-3 rounded-t transition-all hover:bg-indigo-300",style:{height:`${Math.max(o.logins*h,4)}px`},title:`Logins: ${o.logins}`}),e.jsx("div",{className:"bg-emerald-400 dark:bg-emerald-600 w-3 rounded-t transition-all hover:bg-emerald-300",style:{height:`${Math.max(o.activeUsers*h,4)}px`},title:`Active Users: ${o.activeUsers}`}),e.jsx("div",{className:"bg-sky-400 dark:bg-sky-600 w-3 rounded-t transition-all hover:bg-sky-300",style:{height:`${Math.max(o.newUsers*h,4)}px`},title:`New Users: ${o.newUsers}`})]}),e.jsx("div",{className:"text-xs text-gray-500 whitespace-nowrap transform -rotate-45 origin-left mt-6 pl-4",children:xe.utc(o.date).format("MM-DD")})]},o.date)})}),e.jsxs("div",{className:"flex justify-center flex-wrap gap-x-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-indigo-400 rounded"}),e.jsx(z,{type:"secondary",className:"text-xs",children:"Logins"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-400 rounded"}),e.jsx(z,{type:"secondary",className:"text-xs",children:"Active Users"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-sky-400 rounded"}),e.jsx(z,{type:"secondary",className:"text-xs",children:"New Users"})]})]})]})})}),e.jsx(X,{xs:24,xl:12,children:e.jsxs(re,{title:"Login History",style:{margin:"10px 0"},extra:e.jsx(It,{value:l,onChange:o=>d(o?o.utc():null),allowClear:!0}),children:[l&&e.jsxs(z,{children:[r.length," activities found"]}),e.jsx(we,{dataSource:r,size:"small",pagination:{pageSize:10},locale:{emptyText:"No activity on selected date"},columns:[{title:"User",dataIndex:"user",key:"user",render:o=>o?e.jsx("span",{className:"flex items-center gap-2",children:o}):e.jsx(z,{type:"secondary",children:"Unknown"})},{title:"Time",dataIndex:"time",key:"time",render:o=>Ce(o)}],rowKey:o=>o.time+(o.user||"unknown")})]})})]})]}):e.jsx("div",{className:"p-4",children:"No stats available."})}export{Es as default};
