import{bs as F,bt as P,bu as y,bv as E,o as a,ac as M,ao as v,bw as w,r as b,C as R,bx as G,by as I}from"./index-D0pMv6Rn.js";let c=null,l=e=>e(),g=[],p={};function h(){const{getContainer:e,duration:n,rtl:r,maxCount:s,top:t}=p,o=e?.()||document.body;return{getContainer:()=>o,duration:n,rtl:r,maxCount:s,top:t}}const _=a.forwardRef((e,n)=>{const{messageConfig:r,sync:s}=e,{getPrefixCls:t}=b.useContext(R),o=p.prefixCls||t("message"),f=b.useContext(G),[u,d]=I({...r,prefixCls:o,...f.message});return a.useImperativeHandle(n,()=>{const i={...u};return Object.keys(i).forEach(m=>{i[m]=(...x)=>(s(),u[m].apply(u,x))}),{instance:i,sync:s}}),d}),k=a.forwardRef((e,n)=>{const[r,s]=a.useState(h),t=()=>{s(h)};a.useEffect(t,[]);const o=w(),f=o.getRootPrefixCls(),u=o.getIconPrefixCls(),d=o.getTheme(),i=a.createElement(_,{ref:n,sync:t,messageConfig:r});return a.createElement(v,{prefixCls:f,iconPrefixCls:u,theme:d},o.holderRender?o.holderRender(i):i)}),C=()=>{if(!c){const e=document.createDocumentFragment(),n={fragment:e};c=n,l(()=>{E(a.createElement(k,{ref:r=>{const{instance:s,sync:t}=r||{};Promise.resolve().then(()=>{!n.instance&&s&&(n.instance=s,n.sync=t,C())})}}),e)});return}c.instance&&(g.forEach(e=>{const{type:n,skipped:r}=e;if(!r)switch(n){case"open":{l(()=>{const s=c.instance.open({...p,...e.config});s?.then(e.resolve),e.setCloseFn(s)});break}case"destroy":l(()=>{c?.instance.destroy(e.key)});break;default:l(()=>{var s;const t=(s=c.instance)[n].apply(s,M(e.args));t?.then(e.resolve),e.setCloseFn(t)})}}),g=[])};function H(e){p={...p,...e},l(()=>{c?.sync?.()})}function O(e){const n=y(r=>{let s;const t={type:"open",config:e,resolve:r,setCloseFn:o=>{s=o}};return g.push(t),()=>{s?l(()=>{s()}):t.skipped=!0}});return C(),n}function A(e,n){const r=y(s=>{let t;const o={type:e,args:n,resolve:s,setCloseFn:f=>{t=f}};return g.push(o),()=>{t?l(()=>{t()}):o.skipped=!0}});return C(),r}const D=e=>{g.push({type:"destroy",key:e}),C()},Q=["success","info","warning","error","loading"],S={open:O,destroy:D,config:H,useMessage:P,_InternalPanelDoNotUseOrYouWillBeFired:F},W=S;Q.forEach(e=>{W[e]=(...n)=>A(e,n)});export{W as s};
